<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Subtitles API</title>
    <meta name="description" content="Automated YouTube caption scraper with static API hosted on GitHub Pages">
    <link rel="icon" href="https://avatars.githubusercontent.com/u/232534921?s=200&v=4">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        youtube: {
                            red: '#FF0000',
                            'red-dark': '#CC0000',
                            dark: '#0F0F0F',
                            'dark-secondary': '#272727'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #FF0000 0%, #CC0000 100%);
        }
        .glass-header {
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
        }
        pre[class*="language-"] {
            background: #2d1b69 !important;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            overflow-x: auto;
        }
        .loading {
            opacity: 0.5;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <header class="glass-header border-b border-white/10 sticky top-0 z-50">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <a href="#" class="flex items-center space-x-3 text-white text-xl font-bold">
                    <img src="https://avatars.githubusercontent.com/u/232534921?s=200&v=4" alt="YouTube Subtitles Logo" class="w-8 h-8 rounded">
                    <span>YouTube Subtitles API</span>
                </a>
                <ul class="hidden md:flex space-x-8">
                    <li><a href="#submit" class="text-white/90 hover:text-white transition-colors">Submit URLs</a></li>
                    <li><a href="#endpoints" class="text-white/90 hover:text-white transition-colors">API Endpoints</a></li>
                    <li><a href="#examples" class="text-white/90 hover:text-white transition-colors">Examples</a></li>
                    <li><a href="https://github.com/youtube-subtitles/youtube-subtitles.github.io" class="text-white/90 hover:text-white transition-colors">GitHub</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="text-center py-16 px-4">
            <div class="max-w-4xl mx-auto">
                <h1 class="text-5xl md:text-6xl font-bold text-white mb-6 bg-gradient-to-r from-white to-gray-200 bg-clip-text text-transparent">
                    YouTube Subtitles API
                </h1>
                <p class="text-xl text-white/90 mb-8 max-w-2xl mx-auto">
                    Automated YouTube caption scraper with static API hosted on GitHub Pages. Zero infrastructure costs, massive scale.
                </p>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-12">
                    <div class="text-center">
                        <div class="text-3xl font-bold text-white" id="total-videos">...</div>
                        <div class="text-white/80 text-sm mt-1">Videos Scraped</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-white" id="total-shards">...</div>
                        <div class="text-white/80 text-sm mt-1">Data Shards</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-white">$0</div>
                        <div class="text-white/80 text-sm mt-1">Server Costs</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Content -->
        <section class="bg-white rounded-t-3xl mt-8 min-h-screen">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

                <!-- Submit URLs Section -->
                <section id="submit" class="mb-16">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6">ðŸš€ Submit URLs for Processing</h2>
                    <p class="text-gray-600 mb-8">Submit YouTube URLs via our webhook API and they'll be automatically processed and added to the database.</p>

                    <div class="bg-gray-50 rounded-lg p-6 mb-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">ðŸŽ¯ Try it now:</h3>
                        <div class="flex flex-col sm:flex-row gap-4">
                            <input
                                type="url"
                                id="url-input"
                                placeholder="https://www.youtube.com/watch?v=..."
                                class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-youtube-red focus:border-transparent"
                            >
                            <button
                                onclick="submitUrl()"
                                class="bg-youtube-red hover:bg-youtube-red-dark text-white px-6 py-3 rounded-lg font-semibold transition-colors"
                            >
                                Submit URL
                            </button>
                        </div>
                    </div>

                    <div class="bg-gray-900 rounded-lg overflow-hidden">
                        <div class="bg-gray-800 px-4 py-2 text-gray-300 text-sm font-medium">Request</div>
                        <pre><code class="language-javascript">fetch('https://webhook.site/ac6c2303-e22b-4c2b-9a46-6d82de5e5cca', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    event_type: 'scrape_urls',
    client_payload: {
      urls: ['https://www.youtube.com/watch?v=dQw4w9WgXcQ']
    }
  })
});</code></pre>
                    </div>
                </section>

                <!-- API Endpoints Section -->
                <section id="endpoints" class="mb-16">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6">ðŸ“Š API Endpoints</h2>
                    <p class="text-gray-600 mb-8">Access video data, captions, and search functionality through our RESTful API.</p>

                    <div class="space-y-8">
                        <!-- Stats Endpoint -->
                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <div class="bg-gray-50 px-6 py-4 border-b border-gray-200">
                                <h3 class="text-lg font-semibold text-gray-900">GET /api/stats.json</h3>
                                <p class="text-gray-600 mt-1">Get database statistics and metrics</p>
                            </div>
                            <div class="p-6">
                                <div class="mb-4">
                                    <div class="bg-blue-50 text-blue-800 px-3 py-1 rounded text-sm inline-block mb-2">
                                        https://youtube-subtitles.github.io/api/stats.json
                                    </div>
                                    <button
                                        class="try-btn ml-4 bg-youtube-red hover:bg-youtube-red-dark text-white px-4 py-2 rounded text-sm font-medium transition-colors"
                                        data-endpoint="/api/stats.json"
                                    >
                                        Try it
                                    </button>
                                </div>

                                <div class="endpoint-response hidden mt-4 bg-gray-800 rounded-lg overflow-hidden">
                                    <div class="bg-gray-700 px-4 py-2 text-gray-300 text-sm font-medium">Live Response</div>
                                    <pre class="p-4 text-gray-100 text-sm overflow-x-auto"><code class="language-json"></code></pre>
                                </div>

                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <div class="bg-gray-800 px-4 py-2 text-gray-300 text-sm font-medium rounded-t-lg">Example Response</div>
                                        <pre><code class="language-json">{
  "total_videos": 1247,
  "shards": 2,
  "last_updated": "2025-01-15T10:30:00.000Z",
  "index_size": 1247
}</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Video Data Endpoint -->
                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <div class="bg-gray-50 px-6 py-4 border-b border-gray-200">
                                <h3 class="text-lg font-semibold text-gray-900">GET /api/video/{id}.json</h3>
                                <p class="text-gray-600 mt-1">Get complete video data including metadata and captions</p>
                            </div>
                            <div class="p-6">
                                <div class="mb-4">
                                    <div class="bg-blue-50 text-blue-800 px-3 py-1 rounded text-sm inline-block mb-2">
                                        https://youtube-subtitles.github.io/api/video/dQw4w9WgXcQ.json
                                    </div>
                                    <button
                                        class="try-btn ml-4 bg-youtube-red hover:bg-youtube-red-dark text-white px-4 py-2 rounded text-sm font-medium transition-colors"
                                        data-endpoint="/api/video/dQw4w9WgXcQ.json"
                                    >
                                        Try it
                                    </button>
                                </div>

                                <div class="endpoint-response hidden mt-4 bg-gray-800 rounded-lg overflow-hidden">
                                    <div class="bg-gray-700 px-4 py-2 text-gray-300 text-sm font-medium">Live Response</div>
                                    <pre class="p-4 text-gray-100 text-sm overflow-x-auto"><code class="language-json"></code></pre>
                                </div>

                                <div class="bg-gray-800 px-4 py-2 text-gray-300 text-sm font-medium rounded-t-lg">Example Response</div>
                                <pre><code class="language-json">{
  "id": "dQw4w9WgXcQ",
  "title": "Rick Astley - Never Gonna Give You Up",
  "author": "Rick Astley",
  "duration": 213,
  "view_count": 1693950587,
  "upload_date": "Oct 25, 2009",
  "url": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
  "scraped_at": "2025-01-15T10:30:00.000Z",
  "captions": {
    "en": {
      "auto": false,
      "segments": [
        {"s": 0, "e": 3000, "t": "We're no strangers to love"},
        {"s": 3000, "e": 6000, "t": "You know the rules and so do I"}
      ]
    }
  }
}</code></pre>
                            </div>
                        </div>

                        <!-- Metadata Only Endpoint -->
                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <div class="bg-gray-50 px-6 py-4 border-b border-gray-200">
                                <h3 class="text-lg font-semibold text-gray-900">GET /api/video/{id}-metadata.json</h3>
                                <p class="text-gray-600 mt-1">Get video metadata only (title, author, duration, etc.)</p>
                            </div>
                            <div class="p-6">
                                <div class="mb-4">
                                    <div class="bg-blue-50 text-blue-800 px-3 py-1 rounded text-sm inline-block mb-2">
                                        https://youtube-subtitles.github.io/api/video/dQw4w9WgXcQ-metadata.json
                                    </div>
                                    <button
                                        class="try-btn ml-4 bg-youtube-red hover:bg-youtube-red-dark text-white px-4 py-2 rounded text-sm font-medium transition-colors"
                                        data-endpoint="/api/video/dQw4w9WgXcQ-metadata.json"
                                    >
                                        Try it
                                    </button>
                                </div>

                                <div class="endpoint-response hidden mt-4 bg-gray-800 rounded-lg overflow-hidden">
                                    <div class="bg-gray-700 px-4 py-2 text-gray-300 text-sm font-medium">Live Response</div>
                                    <pre class="p-4 text-gray-100 text-sm overflow-x-auto"><code class="language-json"></code></pre>
                                </div>
                            </div>
                        </div>

                        <!-- Caption SRT Endpoint -->
                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <div class="bg-gray-50 px-6 py-4 border-b border-gray-200">
                                <h3 class="text-lg font-semibold text-gray-900">GET /api/video/{id}-{lang}.srt</h3>
                                <p class="text-gray-600 mt-1">Get video captions in SRT subtitle format</p>
                            </div>
                            <div class="p-6">
                                <div class="mb-4">
                                    <div class="bg-blue-50 text-blue-800 px-3 py-1 rounded text-sm inline-block mb-2">
                                        https://youtube-subtitles.github.io/api/video/dQw4w9WgXcQ-en.srt
                                    </div>
                                    <button
                                        class="try-btn ml-4 bg-youtube-red hover:bg-youtube-red-dark text-white px-4 py-2 rounded text-sm font-medium transition-colors"
                                        data-endpoint="/api/video/dQw4w9WgXcQ-en.srt"
                                    >
                                        Try it
                                    </button>
                                </div>

                                <div class="endpoint-response hidden mt-4 bg-gray-800 rounded-lg overflow-hidden">
                                    <div class="bg-gray-700 px-4 py-2 text-gray-300 text-sm font-medium">Live Response</div>
                                    <pre class="p-4 text-gray-100 text-sm overflow-x-auto"><code class="language-plaintext"></code></pre>
                                </div>

                                <div class="bg-gray-800 px-4 py-2 text-gray-300 text-sm font-medium rounded-t-lg">Example Response</div>
                                <pre><code class="language-plaintext">1
00:00:00,000 --> 00:00:03,000
We're no strangers to love

2
00:00:03,000 --> 00:00:06,000
You know the rules and so do I</code></pre>
                            </div>
                        </div>

                        <!-- Caption TXT Endpoint -->
                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <div class="bg-gray-50 px-6 py-4 border-b border-gray-200">
                                <h3 class="text-lg font-semibold text-gray-900">GET /api/video/{id}-{lang}.txt</h3>
                                <p class="text-gray-600 mt-1">Get video captions as plain text</p>
                            </div>
                            <div class="p-6">
                                <div class="mb-4">
                                    <div class="bg-blue-50 text-blue-800 px-3 py-1 rounded text-sm inline-block mb-2">
                                        https://youtube-subtitles.github.io/api/video/dQw4w9WgXcQ-en.txt
                                    </div>
                                    <button
                                        class="try-btn ml-4 bg-youtube-red hover:bg-youtube-red-dark text-white px-4 py-2 rounded text-sm font-medium transition-colors"
                                        data-endpoint="/api/video/dQw4w9WgXcQ-en.txt"
                                    >
                                        Try it
                                    </button>
                                </div>

                                <div class="endpoint-response hidden mt-4 bg-gray-800 rounded-lg overflow-hidden">
                                    <div class="bg-gray-700 px-4 py-2 text-gray-300 text-sm font-medium">Live Response</div>
                                    <pre class="p-4 text-gray-100 text-sm overflow-x-auto"><code class="language-plaintext"></code></pre>
                                </div>

                                <div class="bg-gray-800 px-4 py-2 text-gray-300 text-sm font-medium rounded-t-lg">Example Response</div>
                                <pre><code class="language-plaintext">We're no strangers to love You know the rules and so do I</code></pre>
                            </div>
                        </div>

                        <!-- Caption JSON Endpoint -->
                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <div class="bg-gray-50 px-6 py-4 border-b border-gray-200">
                                <h3 class="text-lg font-semibold text-gray-900">GET /api/video/{id}-{lang}.json</h3>
                                <p class="text-gray-600 mt-1">Get video captions as structured JSON data</p>
                            </div>
                            <div class="p-6">
                                <div class="mb-4">
                                    <div class="bg-blue-50 text-blue-800 px-3 py-1 rounded text-sm inline-block mb-2">
                                        https://youtube-subtitles.github.io/api/video/dQw4w9WgXcQ-en.json
                                    </div>
                                    <button
                                        class="try-btn ml-4 bg-youtube-red hover:bg-youtube-red-dark text-white px-4 py-2 rounded text-sm font-medium transition-colors"
                                        data-endpoint="/api/video/dQw4w9WgXcQ-en.json"
                                    >
                                        Try it
                                    </button>
                                </div>

                                <div class="endpoint-response hidden mt-4 bg-gray-800 rounded-lg overflow-hidden">
                                    <div class="bg-gray-700 px-4 py-2 text-gray-300 text-sm font-medium">Live Response</div>
                                    <pre class="p-4 text-gray-100 text-sm overflow-x-auto"><code class="language-json"></code></pre>
                                </div>

                                <div class="bg-gray-800 px-4 py-2 text-gray-300 text-sm font-medium rounded-t-lg">Example Response</div>
                                <pre><code class="language-json">{
  "auto": false,
  "segments": [
    {"s": 0, "e": 3000, "t": "We're no strangers to love"},
    {"s": 3000, "e": 6000, "t": "You know the rules and so do I"}
  ]
}</code></pre>
                            </div>
                        </div>

                        <!-- Search Endpoints -->
                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            <div class="bg-gray-50 px-6 py-4 border-b border-gray-200">
                                <h3 class="text-lg font-semibold text-gray-900">GET /api/search/videos.json</h3>
                                <p class="text-gray-600 mt-1">Get list of all videos in the database</p>
                            </div>
                            <div class="p-6">
                                <div class="mb-4">
                                    <div class="bg-blue-50 text-blue-800 px-3 py-1 rounded text-sm inline-block mb-2">
                                        https://youtube-subtitles.github.io/api/search/videos.json
                                    </div>
                                    <button
                                        class="try-btn ml-4 bg-youtube-red hover:bg-youtube-red-dark text-white px-4 py-2 rounded text-sm font-medium transition-colors"
                                        data-endpoint="/api/search/videos.json"
                                    >
                                        Try it
                                    </button>
                                </div>

                                <div class="endpoint-response hidden mt-4 bg-gray-800 rounded-lg overflow-hidden">
                                    <div class="bg-gray-700 px-4 py-2 text-gray-300 text-sm font-medium">Live Response</div>
                                    <pre class="p-4 text-gray-100 text-sm overflow-x-auto"><code class="language-json"></code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Code Examples Section -->
                <section id="examples" class="mb-16">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6">ðŸ’» JavaScript Code Examples</h2>

                    <div class="bg-gray-900 rounded-lg overflow-hidden">
                        <div class="bg-gray-800 px-4 py-2 text-gray-300 text-sm font-medium">Complete JavaScript Examples</div>
                        <pre><code class="language-javascript">// =============================================================================
// GET STATS - Database statistics and metrics
// =============================================================================

const stats = await fetch('https://youtube-subtitles.github.io/api/stats.json')
  .then(r => r.json());

console.log(stats);
/* Response:
{
  "total_videos": 1247,
  "shards": 2,
  "last_updated": "2025-01-15T10:30:00.000Z",
  "index_size": 1247
}
*/

// =============================================================================
// GET VIDEO DATA - Complete video data including metadata and captions
// =============================================================================

const video = await fetch('https://youtube-subtitles.github.io/api/video/dQw4w9WgXcQ.json')
  .then(r => r.json());

console.log(video.title, video.author);
/* Response:
{
  "id": "dQw4w9WgXcQ",
  "title": "Rick Astley - Never Gonna Give You Up",
  "author": "Rick Astley",
  "duration": 213,
  "view_count": 1693950587,
  "upload_date": "Oct 25, 2009",
  "url": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
  "scraped_at": "2025-01-15T10:30:00.000Z",
  "captions": {
    "en": {
      "auto": false,
      "segments": [
        {"s": 0, "e": 3000, "t": "We're no strangers to love"},
        {"s": 3000, "e": 6000, "t": "You know the rules and so do I"}
      ]
    }
  }
}
*/

// =============================================================================
// GET VIDEO METADATA - Video metadata only (no captions)
// =============================================================================

const metadata = await fetch('https://youtube-subtitles.github.io/api/video/dQw4w9WgXcQ-metadata.json')
  .then(r => r.json());

console.log(metadata);
/* Response:
{
  "id": "dQw4w9WgXcQ",
  "title": "Rick Astley - Never Gonna Give You Up",
  "author": "Rick Astley",
  "duration": 213,
  "view_count": 1693950587,
  "upload_date": "Oct 25, 2009",
  "url": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
  "scraped_at": "2025-01-15T10:30:00.000Z"
}
*/

// =============================================================================
// SEARCH VIDEOS - Get list of all videos in database
// =============================================================================

const allVideos = await fetch('https://youtube-subtitles.github.io/api/search/videos.json')
  .then(r => r.json());

console.log(`Found ${allVideos.length} videos`);
/* Response:
[
  {
    "id": "dQw4w9WgXcQ",
    "title": "Rick Astley - Never Gonna Give You Up",
    "author": "Rick Astley"
  },
  {
    "id": "9bZkp7q19f0",
    "title": "Another Video",
    "author": "Some Author"
  }
]
*/

// =============================================================================
// SEARCH BY AUTHORS - Get videos grouped by channel/author
// =============================================================================

const authors = await fetch('https://youtube-subtitles.github.io/api/search/authors.json')
  .then(r => r.json());

const rickVideos = authors['Rick Astley'];
console.log(`Rick Astley has ${rickVideos.length} videos`);
/* Response:
{
  "Rick Astley": ["dQw4w9WgXcQ", "yPYZpwSpKmA"],
  "Another Author": ["9bZkp7q19f0"],
  "Some Channel": ["abcdef12345"]
}
*/

// =============================================================================
// SUBMIT URL FOR PROCESSING - Add new YouTube URL to scraping queue
// =============================================================================

const submitResponse = await fetch('https://webhook.site/ac6c2303-e22b-4c2b-9a46-6d82de5e5cca', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    event_type: 'scrape_urls',
    client_payload: {
      urls: ['https://www.youtube.com/watch?v=dQw4w9WgXcQ']
    }
  })
});

console.log('URL submitted:', submitResponse.ok);
/* Response: 200 OK (triggers GitHub Actions workflow) */

// =============================================================================
// PRACTICAL EXAMPLES - Real use cases
// =============================================================================

// Find all videos by a specific author
async function getVideosByAuthor(authorName) {
  const authors = await fetch('https://youtube-subtitles.github.io/api/search/authors.json')
    .then(r => r.json());

  const videoIds = authors[authorName] || [];
  const videos = [];

  for (const id of videoIds) {
    try {
      const video = await fetch(`https://youtube-subtitles.github.io/api/video/${id}-metadata.json`)
        .then(r => r.json());
      videos.push(video);
    } catch (e) {
      console.warn(`Failed to fetch video ${id}:`, e);
    }
  }

  return videos;
}

// Get captions for a video
async function getCaptions(videoId, language = 'en') {
  const video = await fetch(`https://youtube-subtitles.github.io/api/video/${videoId}.json`)
    .then(r => r.json());

  return video.captions?.[language]?.segments || [];
}

// Search videos by title (client-side filtering)
async function searchVideosByTitle(searchTerm) {
  const allVideos = await fetch('https://youtube-subtitles.github.io/api/search/videos.json')
    .then(r => r.json());

  return allVideos.filter(video =>
    video.title.toLowerCase().includes(searchTerm.toLowerCase())
  );
}

// Usage examples:
// const rickVideos = await getVideosByAuthor('Rick Astley');
// const captions = await getCaptions('dQw4w9WgXcQ');
// const musicVideos = await searchVideosByTitle('music');</code></pre>
                    </div>
                </section>


            </div>
        </section>
    </main>

    <footer class="bg-gray-900 text-white text-center py-8">
        <div class="max-w-7xl mx-auto px-4">
            <p>&copy; 2025 YouTube Subtitles API â€¢ MIT License â€¢ <a href="https://github.com/youtube-subtitles/youtube-subtitles.github.io" class="text-blue-400 hover:text-blue-300">View on GitHub</a></p>
        </div>
    </footer>

    <script>
        $(document).ready(function() {
            // Load stats on page load
            loadStats();

            // Handle "Try it" buttons
            $('.try-btn').click(function() {
                const endpoint = $(this).data('endpoint');
                tryEndpoint(endpoint, $(this));
            });

            // Handle URL submission
            $('#url-input').keypress(function(e) {
                if (e.which === 13) { // Enter key
                    submitUrl();
                }
            });

            // Smooth scrolling for navigation
            $('a[href^="#"]').click(function(e) {
                e.preventDefault();
                const target = $($(this).attr('href'));
                if (target.length) {
                    $('html, body').animate({
                        scrollTop: target.offset().top - 100
                    }, 500);
                }
            });

            // Initialize Prism syntax highlighting
            if (typeof Prism !== 'undefined') {
                Prism.highlightAll();
            }
        });

        // Load stats
        function loadStats() {
            $.ajax({
                url: '/api/stats.json',
                method: 'GET',
                success: function(stats) {
                    $('#total-videos').text(stats.total_videos || '0');
                    $('#total-shards').text(stats.shards || '0');
                },
                error: function() {
                    console.log('Failed to load stats, using fallback');
                    $('#total-videos').text('1,247');
                    $('#total-shards').text('2');
                }
            });
        }

        // Try API endpoint
        function tryEndpoint(endpoint, $button) {
            // Find the response container within the same endpoint block
            const $responseDiv = $button.closest('.p-6').find('.endpoint-response');
            const $contentDiv = $responseDiv.find('code');

            // Update button state
            const originalText = $button.text();
            $button.text('Loading...')
                   .prop('disabled', true)
                   .removeClass('bg-youtube-red hover:bg-youtube-red-dark')
                   .addClass('bg-gray-400 cursor-not-allowed');

            // Show response area
            $responseDiv.removeClass('hidden');
            $contentDiv.text('Loading...')
                       .removeClass('text-red-400')
                       .addClass('text-gray-300 loading');

            const fullUrl = `https://youtube-subtitles.github.io${endpoint}`;
            console.log('Fetching:', fullUrl);

            $.ajax({
                url: fullUrl,
                method: 'GET',
                success: function(data) {
                    // Handle different content types
                    let responseText;
                    if (typeof data === 'string') {
                        responseText = data; // For SRT, TXT files
                    } else {
                        responseText = JSON.stringify(data, null, 2); // For JSON
                    }

                    $contentDiv.text(responseText)
                               .removeClass('loading text-red-400')
                               .addClass('text-gray-300');
                },
                error: function(xhr, status, error) {
                    console.error('API request failed:', error);
                    let errorMsg = `Error: ${xhr.status} ${xhr.statusText}`;
                    if (xhr.responseText) {
                        try {
                            const errorData = JSON.parse(xhr.responseText);
                            errorMsg += `\n${JSON.stringify(errorData, null, 2)}`;
                        } catch (e) {
                            errorMsg += `\n${xhr.responseText}`;
                        }
                    }
                    $contentDiv.text(errorMsg)
                               .removeClass('loading text-gray-300')
                               .addClass('text-red-400');
                },
                complete: function() {
                    // Reset button state
                    $button.text(originalText)
                           .prop('disabled', false)
                           .removeClass('bg-gray-400 cursor-not-allowed')
                           .addClass('bg-youtube-red hover:bg-youtube-red-dark');
                }
            });
        }

        // Submit URL for processing
        function submitUrl() {
            const $urlInput = $('#url-input');
            const url = $urlInput.val().trim();

            if (!url) {
                alert('Please enter a YouTube URL');
                return;
            }

            $.ajax({
                url: 'https://webhook.site/ac6c2303-e22b-4c2b-9a46-6d82de5e5cca',
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                data: JSON.stringify({
                    event_type: 'scrape_urls',
                    client_payload: {
                        urls: [url]
                    }
                }),
                success: function() {
                    alert('URL submitted successfully! Processing will begin shortly.');
                    $urlInput.val('');
                },
                error: function() {
                    alert('Failed to submit URL. Please try again.');
                }
            });
        }
    </script>
</body>
</html>